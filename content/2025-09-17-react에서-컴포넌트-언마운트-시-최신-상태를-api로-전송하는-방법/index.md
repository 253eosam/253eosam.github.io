---
title: "Reactì—ì„œ ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œ ìµœì‹  ìƒíƒœë¥¼ APIë¡œ ì „ì†¡í•˜ëŠ” ë°©ë²•"
date: "2025-09-17T07:45:55.001Z"
tags:
  - React
description: "Reactë¥¼ ì‚¬ìš©í•˜ë‹¤ ë³´ë©´ ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸(unmount) ë  ë•Œ íŠ¹ì • ìƒíƒœì˜ ìµœì‹  ê°’ì„ APIë¡œ ì „ì†¡í•´ì•¼ í•˜ëŠ” ìƒí™©ì´ ì¢…ì¢… ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì…ë ¥ ì¤‘ì¸ ë‚´ìš©ì„ ì €ì¥í•˜ê±°ë‚˜ í˜ì´ì§€ ì´íƒˆ ì§ì „ì— ë°ì´í„°ë¥¼ ë°±ì—”ë“œì— ì „ì†¡í•˜ëŠ” ê²½ìš°ì…ë‹ˆë‹¤.í•˜ì§€ë§Œ ë‹¨ìˆœíˆ useEffect"
url: "https://velog.io/@253eosam/React%EC%97%90%EC%84%9C-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EC%96%B8%EB%A7%88%EC%9A%B4%ED%8A%B8-%EC%8B%9C-%EC%B5%9C%EC%8B%A0-%EC%83%81%ED%83%9C%EB%A5%BC-API%EB%A1%9C-%EC%A0%84%EC%86%A1%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95"
---

Reactë¥¼ ì‚¬ìš©í•˜ë‹¤ ë³´ë©´ ì»´í¬ë„ŒíŠ¸ê°€ **ì–¸ë§ˆìš´íŠ¸(unmount)** ë  ë•Œ íŠ¹ì • ìƒíƒœì˜ **ìµœì‹  ê°’**ì„ APIë¡œ ì „ì†¡í•´ì•¼ í•˜ëŠ” ìƒí™©ì´ ì¢…ì¢… ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì…ë ¥ ì¤‘ì¸ ë‚´ìš©ì„ ì €ì¥í•˜ê±°ë‚˜ í˜ì´ì§€ ì´íƒˆ ì§ì „ì— ë°ì´í„°ë¥¼ ë°±ì—”ë“œì— ì „ì†¡í•˜ëŠ” ê²½ìš°ì…ë‹ˆë‹¤.

í•˜ì§€ë§Œ ë‹¨ìˆœíˆ `useEffect` ì•ˆì—ì„œ state ê°’ì„ ì°¸ì¡°í•˜ë©´ **stale(ì˜¤ë˜ëœ)** ê°’ì´ ì „ë‹¬ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í•´ê²°í•˜ê¸° ìœ„í•œ ì•ˆì „í•˜ê³  íš¨ìœ¨ì ì¸ ë°©ë²•ì„ ì†Œê°œí•©ë‹ˆë‹¤.

* * *

## ğŸ¯ ëª©í‘œ

*   ì»´í¬ë„ŒíŠ¸ê°€ ì–¸ë§ˆìš´íŠ¸ë  ë•Œ íŠ¹ì • ìƒíƒœì˜ ìµœì‹  ê°’ì„ APIë¡œ ì „ì†¡í•œë‹¤.

* * *

## ğŸ”§ ë¬¸ì œ ìƒí™©

```tsx
useEffect(() => {
  return () => {
    fetch('/api/save', {
      method: 'POST',
      body: JSON.stringify({ value: inputValue }), // âŒ ì˜¤ë˜ëœ ê°’ì¼ ìˆ˜ ìˆìŒ
    });
  };
}, []);
```

ìœ„ ì½”ë“œì—ì„œëŠ” `inputValue`ê°€ ìµœì‹  ê°’ì´ ì•„ë‹ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ëŠ” `useEffect`ì˜ í´ë¡œì €ê°€ ì´ˆê¸° ê°’ì„ ê¸°ì–µí•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.

* * *

## âœ… í•´ê²° ë°©ë²•: `useRef`ë¥¼ í™œìš©í•œ ìµœì‹  ê°’ ë³´ì¡´

Reactì˜ `useRef`ë¥¼ ì‚¬ìš©í•˜ë©´ ë¦¬ë Œë”ë§ ì—†ì´ë„ ê°’ì„ ìœ ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ë¥¼ í™œìš©í•´ **í•­ìƒ ìµœì‹  ìƒíƒœë¥¼ ì°¸ì¡°í•  ìˆ˜ ìˆëŠ” êµ¬ì¡°**ë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```tsx
import { useEffect, useRef, useState } from 'react';

function MyComponent() {
  const [inputValue, setInputValue] = useState('');
  const latestValueRef = useRef(inputValue);

  // ìµœì‹  ê°’ì„ refì— ì €ì¥
  useEffect(() => {
    latestValueRef.current = inputValue;
  }, [inputValue]);

  // ì–¸ë§ˆìš´íŠ¸ ì‹œ ìµœì‹  ê°’ ì „ì†¡
  useEffect(() => {
    return () => {
      const sendValue = latestValueRef.current;
      fetch('/api/save', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ value: sendValue }),
        keepalive: true, // ë¸Œë¼ìš°ì € í˜ì´ì§€ ì´íƒˆì—ë„ ì „ì†¡ ìœ ì§€
      });
    };
  }, []);

  return (
    <input
      value={inputValue}
      onChange={(e) => setInputValue(e.target.value)}
    />
  );
}
```

## ğŸ’¡ ì¶”ê°€ íŒ

*   í˜ì´ì§€ ì´íƒˆ ì‹œ API ìš”ì²­ì„ í™•ì‹¤íˆ ë³´ë‚´ê³  ì‹¶ë‹¤ë©´ `window.beforeunload` ì´ë²¤íŠ¸ë‚˜ `visibilitychange`ë¥¼ í™œìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.
*   Next.js ë˜ëŠ” React Routerë¥¼ ì‚¬ìš©í•˜ëŠ” ê²½ìš° ë¼ìš°í„° í›…(`useRouter`, `useBeforeUnload`)ì„ í•¨ê»˜ ì¡°í•©í•˜ë©´ ë” ê°•ë ¥í•œ UXë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

* * *

## âœ… ì •ë¦¬

React ì»´í¬ë„ŒíŠ¸ ì–¸ë§ˆìš´íŠ¸ ì‹œì ì— ìµœì‹  ìƒíƒœë¥¼ APIë¡œ ì „ì†¡í•˜ë ¤ë©´:

1.  `useRef`ë¥¼ ì‚¬ìš©í•´ ìµœì‹  ê°’ì„ ë”°ë¡œ ë³´ê´€í•˜ê³ ,
2.  `useEffect` cleanup í•¨ìˆ˜ì—ì„œ í•´ë‹¹ ref ê°’ì„ APIë¡œ ì „ì†¡í•©ë‹ˆë‹¤.

ì´ ë°©ì‹ì€ ë°ì´í„° ìœ ì‹¤ì„ ë°©ì§€í•˜ê³  ì•ˆì •ì ì¸ ì‚¬ìš©ì ê²½í—˜ì„ ì œê³µí•˜ëŠ” ë° í° ë„ì›€ì´ ë©ë‹ˆë‹¤.